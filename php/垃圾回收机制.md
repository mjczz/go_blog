## 介绍一下PHP的垃圾回收机制

PHP使用了引用计数（reference counting）GC机制，同时使用根缓冲区机制，

当php发现有存在循环引用的zval时，就会把其投入到根缓冲区，

当根缓冲区达到配置文件中的指定数量后，就会进行垃圾回收，以此解决循环引用导致的内存泄漏问题。

- 1. 如果引用计数减少到零，所在变量容器将被清除（free），不属于垃圾；
- 2. 如果一个zval的引用计数减少后还大于0，那么它会进入垃圾周期。其次，在一个垃圾周期中，通过检查引用计数是否减1，并且检查哪些变量容器的引用次数是零，来发现哪部分是垃圾。

每个对象都内含一个引用计数器refcount，每个reference连接到对象，计数器加1。当reference离开生存空间或被设为 NULL，计数器减1。当某个对象的引用计数器为零时，PHP知道你将不再需要使用这个对象，释放其所占的内存空间。